require(tidyverse)
require(R.utils)
setwd("C:/Users/aaron/Desktop/Home Credit Default Risk Competition")
data.bureau <- read.csv("bureau.csv")
data.bureau_balance <- read.csv("bureau_balance.csv")
nrow(data.bureau) - nrow(unique(data.bureau))
nrow(data.bureau_balance) - nrow(unique(data.bureau_balance))
col_ct = sapply(data.bureau, function(x) length(unique(x)))
cat("Constant feature count:", length(col_ct[col_ct==1]))
col_ct = sapply(data.bureau_balance, function(x) length(unique(x)))
cat("Constant feature count:", length(col_ct[col_ct==1]))
str(lapply(data.bureau, unique), vec.len = 4)
View(data.bureau)
View(data.bureau_balance)
View(data.bureau)
str(lapply(data.bureau_balance, unique), vec.len = 4)
View(data.bureau_balance)
#Change the IDs to characters.
data.bureau.clean <- data.bureau %>%
mutate(SK_ID_CURR  = as.character(SK_ID_CURR ),
SK_ID_BUREAU = as.character(SK_ID_BUREAU))
data.bureau_balance.clean <- data.bureau_balance %>%
mutate(SK_ID_BUREAU = as.character(SK_ID_BUREAU))
data.bureau %>% summarise_all(funs(100*mean(is.na(.))))
data.bureau_balance %>% summarise_all(funs(100*mean(is.na(.))))
#filter the NA patterned features
byNA.data.bureau <- data.bureau %>%
filter(is.na(DAYS_CREDIT_ENDDATE) &
is.na(DAYS_ENDDATE_FACT) &
is.na(AMT_CREDIT_MAX_OVERDUE) &
is.na(AMT_CREDIT_SUM) &
is.na(AMT_CREDIT_SUM_DEBT) &
is.na(AMT_CREDIT_SUM_DEBT) &
is.na(AMT_ANNUITY))
#show the remaining levels in the factor features
str(lapply(droplevels(byNA.data.bureau.clean), unique), vec.len = 4)
#filter the NA patterned features
byNA.data.bureau <- data.bureau %>%
filter(is.na(DAYS_CREDIT_ENDDATE) &
is.na(DAYS_ENDDATE_FACT) &
is.na(AMT_CREDIT_MAX_OVERDUE) &
is.na(AMT_CREDIT_SUM) &
is.na(AMT_CREDIT_SUM_DEBT) &
is.na(AMT_CREDIT_SUM_DEBT) &
is.na(AMT_ANNUITY))
#show the remaining levels in the factor features
str(lapply(droplevels(byNA.data.bureau), unique), vec.len = 4)
View(byNA.data.bureau)
View(data.bureau_balance)
#filter the NA patterned features
byNA.data.bureau <- data.bureau %>%
filter(is.na(DAYS_CREDIT_ENDDATE),
is.na(DAYS_ENDDATE_FACT),
is.na(AMT_CREDIT_MAX_OVERDUE),
is.na(AMT_CREDIT_SUM),
is.na(AMT_CREDIT_SUM_DEBT),
is.na(AMT_CREDIT_SUM_DEBT),
is.na(AMT_ANNUITY))
#show the remaining levels in the factor features
str(lapply(droplevels(byNA.data.bureau), unique), vec.len = 4)
#filter the NA patterned features
byNA.data.bureau <- data.bureau %>%
filter(is.na(DAYS_CREDIT_ENDDATE) &
is.na(DAYS_ENDDATE_FACT) &
is.na(AMT_CREDIT_MAX_OVERDUE) &
is.na(AMT_CREDIT_SUM) &
is.na(AMT_CREDIT_SUM_DEBT) &
is.na(AMT_CREDIT_SUM_DEBT) &
is.na(AMT_ANNUITY))
#show the remaining levels in the factor features
str(lapply(droplevels(byNA.data.bureau), unique), vec.len = 4)
contains.missing <- data.bureau %>%
select_if(function(x) any(is.na(x)))
glimpse(contains.missing)
View(data.bureau)
View(data.bureau_balance)
